{"ast":null,"code":"import _slicedToArray from \"D:\\\\nestJS\\\\movie-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"D:\\\\nestJS\\\\movie-frontend\\\\src\\\\components\\\\Home.tsx\";\nimport React, { useState, useEffect } from 'react';\nimport { Link, useHistory } from 'react-router-dom';\nimport { useAuth0 } from '../contexts/auth0-context';\n\nfunction Home() {\n  let history = useHistory();\n\n  const _useAuth = useAuth0(),\n        isAuthenticated = _useAuth.isAuthenticated,\n        getIdTokenClaims = _useAuth.getIdTokenClaims,\n        user = _useAuth.user;\n\n  const _useState = useState(),\n        _useState2 = _slicedToArray(_useState, 2),\n        movies = _useState2[0],\n        setMovies = _useState2[1];\n\n  const deleteMovie = async id => {\n    const accessToken = await getIdTokenClaims();\n    await fetch(`${process.env.REACT_APP_SERVER_BASE_URL}/movie/delete?movieID=${id}`, {\n      method: 'delete',\n      headers: new Headers({\n        'Content-Type': 'application/json',\n        Accept: 'application/json',\n        authorization: `Bearer ${accessToken.__raw}`\n      })\n    });\n\n    _removeMovieFromView(id);\n\n    history.push('/');\n  };\n\n  const _removeMovieFromView = id => {\n    const index = movies.findIndex(movie => movie._id === id);\n    movies.splice(index, 1);\n  };\n\n  useEffect(() => {\n    const fetchMovies = async () => {\n      const response = await fetch(`${process.env.REACT_APP_SERVER_BASE_URL}/movie/movies`);\n      const json = await response.json();\n      setMovies(json);\n    };\n\n    fetchMovies();\n  }, []);\n  return React.createElement(\"section\", {\n    className: \"blog-area section\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"row\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49\n    },\n    __self: this\n  }, movies && movies.map(movie => React.createElement(\"div\", {\n    className: \"col-lg-4 col-md-6\",\n    key: movie._id,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"card h-100\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"single-post post-style-1\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"blog-image\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    src: \"https://res.cloudinary.com/yemiwebby-com-ng/image/upload/v1563149789/blog-image_psvipq.jpg\",\n    alt: \"Blog\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65\n    },\n    __self: this\n  })), React.createElement(\"span\", {\n    className: \"avatar\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    src: \"http://res.cloudinary.com/yemiwebby-com-ng/image/upload/v1513770253/WEB_FREAK_50PX-01_yaqxg7.png\",\n    alt: \"Profile\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"blog-info\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78\n    },\n    __self: this\n  }, React.createElement(\"h4\", {\n    className: \"title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79\n    },\n    __self: this\n  }, React.createElement(\"span\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  }, React.createElement(\"b\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81\n    },\n    __self: this\n  }, movie.title))), React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84\n    },\n    __self: this\n  }, movie.description))), React.createElement(\"ul\", {\n    className: \"post-footer\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88\n    },\n    __self: this\n  }, React.createElement(\"li\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89\n    },\n    __self: this\n  }, React.createElement(Link, {\n    to: `/movie/${movie._id}`,\n    className: \"btn btn-sm btn-outline-secondary\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90\n    },\n    __self: this\n  }, \"View Movie\", ' ')), React.createElement(\"li\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97\n    },\n    __self: this\n  }, isAuthenticated && user.name === movie.author && React.createElement(Link, {\n    to: `/edit/${movie._id}`,\n    className: \"btn btn-sm btn-outline-secondary\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101\n    },\n    __self: this\n  }, \"Edit Movie\", ' ')), React.createElement(\"li\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109\n    },\n    __self: this\n  }, isAuthenticated && user.name === movie.author && React.createElement(\"button\", {\n    className: \"btn btn-sm btn-outline-secondary\",\n    onClick: () => deleteMovie(movie._id),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113\n    },\n    __self: this\n  }, \"Delete Movie\")))))))));\n}\n\nexport default Home;","map":{"version":3,"sources":["D:/nestJS/movie-frontend/src/components/Home.tsx"],"names":["React","useState","useEffect","Link","useHistory","useAuth0","Home","history","isAuthenticated","getIdTokenClaims","user","movies","setMovies","deleteMovie","id","accessToken","fetch","process","env","REACT_APP_SERVER_BASE_URL","method","headers","Headers","Accept","authorization","__raw","_removeMovieFromView","push","index","findIndex","movie","_id","splice","fetchMovies","response","json","map","title","description","name","author"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Link, useHistory } from 'react-router-dom';\nimport { useAuth0 } from '../contexts/auth0-context';\n\nfunction Home(): JSX.Element {\n\tlet history = useHistory();\n\tconst { isAuthenticated, getIdTokenClaims, user } = useAuth0();\n\n\tconst [movies, setMovies] = useState();\n\n\tconst deleteMovie = async (id: string) => {\n\t\tconst accessToken = await getIdTokenClaims();\n\t\tawait fetch(\n\t\t\t`${process.env.REACT_APP_SERVER_BASE_URL}/movie/delete?movieID=${id}`,\n\t\t\t{\n\t\t\t\tmethod: 'delete',\n\t\t\t\theaders: new Headers({\n\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t\tAccept: 'application/json',\n\t\t\t\t\tauthorization: `Bearer ${accessToken.__raw}`,\n\t\t\t\t}),\n\t\t\t}\n\t\t);\n\t\t_removeMovieFromView(id);\n\t\thistory.push('/');\n\t};\n\n\tconst _removeMovieFromView = (id: string) => {\n\t\tconst index = movies.findIndex(\n\t\t\t(movie: { _id: string }) => movie._id === id\n\t\t);\n\t\tmovies.splice(index, 1);\n\t};\n\n\tuseEffect(() => {\n\t\tconst fetchMovies = async (): Promise<any> => {\n\t\t\tconst response = await fetch(\n\t\t\t\t`${process.env.REACT_APP_SERVER_BASE_URL}/movie/movies`\n\t\t\t);\n\t\t\tconst json = await response.json();\n\t\t\tsetMovies(json);\n\t\t};\n\t\tfetchMovies();\n\t}, []);\n\n\treturn (\n\t\t<section className=\"blog-area section\">\n\t\t\t<div className=\"container\">\n\t\t\t\t<div className=\"row\">\n\t\t\t\t\t{movies &&\n\t\t\t\t\t\tmovies.map(\n\t\t\t\t\t\t\t(movie: {\n\t\t\t\t\t\t\t\ttitle: React.ReactNode;\n                                description: React.Rea\n\t\t\t\t\t\t\t\t_id: any;\n\t\t\t\t\t\t\t\tauthor: any;\n\t\t\t\t\t\t\t}) => (\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclassName=\"col-lg-4 col-md-6\"\n\t\t\t\t\t\t\t\t\tkey={movie._id}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<div className=\"card h-100\">\n\t\t\t\t\t\t\t\t\t\t<div className=\"single-post post-style-1\">\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"blog-image\">\n\t\t\t\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\t\t\t\tsrc=\"https://res.cloudinary.com/yemiwebby-com-ng/image/upload/v1563149789/blog-image_psvipq.jpg\"\n\t\t\t\t\t\t\t\t\t\t\t\t\talt=\"Blog\"\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"avatar\">\n\t\t\t\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\t\t\t\tsrc=\"http://res.cloudinary.com/yemiwebby-com-ng/image/upload/v1513770253/WEB_FREAK_50PX-01_yaqxg7.png\"\n\t\t\t\t\t\t\t\t\t\t\t\t\talt=\"Profile\"\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</span>\n\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"blog-info\">\n\t\t\t\t\t\t\t\t\t\t\t\t<h4 className=\"title\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<b>{movie.title}</b>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t</h4>\n                                                <p>{movie.description}</p>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t\t<ul className=\"post-footer\">\n\t\t\t\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\t\t\t\t\t\tto={`/movie/${movie._id}`}\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"btn btn-sm btn-outline-secondary\"\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\tView Movie{' '}\n\t\t\t\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t\t\t\t{isAuthenticated &&\n\t\t\t\t\t\t\t\t\t\t\t\t\tuser.name ===\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmovie.author && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tto={`/edit/${movie._id}`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"btn btn-sm btn-outline-secondary\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tEdit Movie{' '}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t\t\t\t{isAuthenticated &&\n\t\t\t\t\t\t\t\t\t\t\t\t\tuser.name ===\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmovie.author && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"btn btn-sm btn-outline-secondary\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdeleteMovie(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmovie._id\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tDelete Movie\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</section>\n\t);\n}\n\nexport default Home;\n"]},"metadata":{},"sourceType":"module"}